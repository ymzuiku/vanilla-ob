function y(t){return!!(t.__isSvg||t.tagName==="svg"||t.ownerSVGElement)}function b(t,n){return!!(f[n]||/-/.test(n)||y(t))}var f={autofocus:!0,role:!0,viewBox:!0};function g(t){let n=[];if(t)if(typeof t=="string"){let e="",i=t.split(", ");i.forEach((s,a)=>{s=s.trim(),a===i.length-1?e+=`${s}[bind-state], ${s} [bind-state]`:e+=`${s}[bind-state], ${s} [bind-state],`}),n=document.body.querySelectorAll(e)}else Object.prototype.toString.call(t)==="[object Array]"?(n=[...t],t.forEach(e=>{n.push(...e.querySelectorAll("*"))})):(n=[t],n.push(...t.querySelectorAll("*")));return n}var m=(t,n)=>{if(!t){console.error("aoife.next() need target");return}let e=g(n),i=g(t),s=i.length;for(let a=0;a<s;a++){let r=i[a];if(r.__bindState&&document.body.contains(r)){if(e.length){let o=e.length,u=!1;for(let l=0;l<o;l++){let c=e[l];if(c===r||c.contains(r)){u=!0;break}}if(u)continue}r.__bindState.forEach(o=>{o()})}}},d=(t,n,e)=>{if(n&&/^on/.test(n)){t[n]=e;return}if(typeof e!="function"){b(t,n)?t.setAttribute(n,e):typeof e=="object"?Object.assign(t[n],e):t[n]=e;return}t.__bindState||(t.setAttribute("bind-state",""),t.__bindState=new Map);let i;n===null?i=e:b(t,n)?i=()=>{Promise.resolve(e()).then(s=>{t.setAttribute(n,s)})}:i=()=>{Promise.resolve(e()).then(s=>{typeof s=="object"?Object.assign(t[n],s):t[n]=s})},i(),t.__bindState.set(n,i)};export{f as attributeKeys,d as bindState,m as nextState};
